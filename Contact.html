<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
</head>
<style>
    .main-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    min-height: 100vh; /* This ensures minimum height of viewport */
}
</style>
<body>

    
    <header class="main-header">
        <div class="logo">
            <div class="logo-main">CX</div>
            <div class="logo-sub">CapacityX</div>
        </div>

        <button class="mobile-menu-button">â˜°</button>

        <nav class="nav-menu">
            <div class="nav-links">
                <a href="Home.html">Accueil</a>
                <a href="Apropos.html">Ã€ propos</a>
                <a href="Boutique.html">Boutique</a>
                <a href="Blog.html">Blog</a>
           
                <a href="Contact.html">Contact</a>
            </div>

            <div class="right-section">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Recherche...">
                    <span class="search-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px" class="icon-svg">
                            <path
                                d="M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z" />
                        </svg>
                    </span>
                </div>
                
                <div class="login-cart">
                    <span>Connexion</span>
                    <div class="cart-icon" id="cartButton">
                        ðŸ›’
                        <span class="cart-count">0</span>
                    </div>
                </div>
            </div>
        </nav>

        <div class="overlay"></div>
    </header>
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="panier-header">
                <h2>Panier</h2>
                
            </div>
            <span class="close">&times;</span>
            <div class="product-details">
                <div class="product-image">
                    <img src="https://images.unsplash.com/photo-1593095948071-474c5cc2989d?q=80&w=500&auto=format&fit=crop" 
                         alt="Protein Powder"
                         class="main-image">
                </div>
                <div class="product-info">
                    <h2>ProtÃ©ine en poudre - Vanille</h2>
                    <div class="price-container">
                        <span class="price">$29.99</span>
                        <span class="discount">-20%</span>
                    </div>
                    <p class="type">Type: powder</p>
                    <button class="add-to-cart">AJOUTER AU PANIER</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Add this after the header -->
    <div class="social-sidebar">
        <a href="#" class="social-link facebook"><img src="icons8-facebook.svg" alt="Facebook Icon"></a>
        <a href="#" class="social-link twitter"><img src="icons8-x.svg" alt="twitter Icon"></a>
        <a href="#" class="social-link instagram"><img src="icons8-instagram.svg" alt="instagram Icon"></a>
        <a href="#" class="social-link youtube"><img src="icons8-youtube.svg" alt="youtube Icon"></a>
    </div>


<!--  
    dima l code dial page li khdamin fiha ikon f wst had div 
-->


<div class="main-content">
    <!-- Your page content goes here 
      dima l code dial page li khdamin fiha ikon f wst had div 
       ............ -->





</div>

<!--  
    dima l code dial page li khdamin fiha ikon f wst had div 
-->





    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">CX</div>
                <div class="footer-sublogo">CapacityX</div>
            </div>

            <div class="footer-section">
                <h3>Menu</h3>
                <ul class="footer-links">
                    <li><a href="#">Accueil</a></li>
                    <li><a href="#">Ã€ propos</a></li>
                    <li><a href="#">Boutique</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Demander Ã  l'expert</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Politiques</h3>
                <ul class="footer-links">
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Politique de boutique</a></li>
                    <li><a href="#">ExpÃ©dition et retours</a></li>
                    <li><a href="#">Politique de cookies</a></li>
                    <li><a href="#">Mentions lÃ©gales</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Contact</h3>
                <div class="contact-info">
                    <p>01 23 45 67 89</p>
                    <p>47 rue des Couronnes</p>
                    <p>75020 Paris, France</p>
                </div>
                <div class="social-links">
                    <a href="#" class="social-link facebook"><img src="icons8-facebook.svg" alt="Facebook Icon"></a>
                    <a href="#" class="social-link twitter"><img src="icons8-x.svg" alt="twitter Icon"></a>
                    <a href="#" class="social-link instagram"><img src="icons8-instagram.svg" alt="instagram Icon"></a>
                    <a href="#" class="social-link youtube"><img src="icons8-youtube.svg" alt="youtube Icon"></a>
                </div>
            </div>
        </div>

      
    </footer>
    <script>
        const mobileMenuButton = document.querySelector('.mobile-menu-button');
        const navMenu = document.querySelector('.nav-menu');
        const overlay = document.querySelector('.overlay');

        mobileMenuButton.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        overlay.addEventListener('click', () => {
            navMenu.classList.remove('active');
            overlay.classList.remove('active');
        });


        // Product data structure
const products = [
    {
        id: 1,
        name: "ProtÃ©ine en poudre - Vanille",
        price: 29.99,
        type: "powder",
        discount: 20,
        image: "images/p1.png",
        hoverImage: "images/p1h.png"
    },
    {
        id: 2,
        name: "BCAA 200 capsules",
        price: 35.00,
        type: "capsules",
        discount: 15,
        image: "images/p2.png",
        hoverImage: "images/p2h.png"
    },
    {
        id: 3,
        name: "PrÃ©-entraÃ®nement - Multi fruits",
        price: 45.00,
        discount: 0,
        type: "pre-workout",
        image: "images/p3.png",
        hoverImage: "images/p3h.png"
    },
    {
        id: 4,
        name: "Protein Shake Mix",
        price: 39.99,
        type: "powder",
        discount: 30,
        image: "images/p1.png",
        hoverImage: "images/p1h.png"
    },
    {
        id: 5,
        name: "BCAA en capsules",
        price: 15.00,
        type: "capsules",
        discount: 12,
        image: "images/p4.png",
        hoverImage: "images/p4h.png"
    },
    {
        id: 6,
        name: "BCAA 200 capsules",
        price: 35.00,
        type: "capsules",
        discount: 30,
        image: "images/p5.png",
        hoverImage: "images/p5h.png"
    },
    {
        id: 7,
        name: "ProtÃ©ine en poudre - Cookies et crÃ¨me",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p6.png",
        hoverImage: "images/p6h.png"
    },
    {
        id: 8,
        name: "ProtÃ©ine en poudre - Chocolat",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p7.png"
    },
    {
        id: 9,
        name: "ProtÃ©ine en poudre - Beurre de cacahouÃ¨te",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p8.png"
    },
    {
        id: 10,
        name: "ProtÃ©ine en poudre - Cappuccino",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p9.png"
    },
    {
        id: 11,
        name: "PrÃ©-entraÃ®nement - Framboise",
        price: 23.99,
        type: "pre-workout",
        discount: 30,
        image: "images/p10.png",
        hoverImage: "images/p10h.png"
    },
    {
        id: 12,
        name: "PrÃ©-entraÃ®nement - PastÃ¨que",
        price: 25.99,
        type: "pre-workout",
        discount: 30,
        image: "images/p11.png"
    },
    {
        id: 13,
        name: "PrÃ©-entraÃ®nement - Cerise",
        price: 44.99,
        type: "pre-workout",
        discount: 22,
        image: "images/p12.png"
    },
    {
        id: 14,
        name: "PrÃ©-entraÃ®nement - Pomme verte",
        price: 25.99,
        type: "pre-workout",
        discount: 34,
        image: "images/p13.png"
    },
    {
        id: 15,
        name: "PrÃ©-entraÃ®nement - Limonade",
        price: 23.99,
        type: "pre-workout",
        discount: 22,
        image: "images/p14.png"
    }
];
// Initialize Stripe with your publishable key

// Cart Manager Class
class CartManager {
    constructor() {
        this.init();
    }

    init() {
        this.updateCartCount();
        this.setupEventListeners();
    }

    setupEventListeners() {
        // Cart button and modal setup
        const modal = document.getElementById('modal');
        const cartButton = document.getElementById('cartButton');
        const closeButton = document.querySelector('.close');

        cartButton?.addEventListener('click', () => {
            this.updateModal();
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        });

        closeButton?.addEventListener('click', () => {
            modal.style.display = 'none';
            document.body.style.overflow = 'unset';
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'unset';
            }
        });

        

        // Setup checkout button
        const checkoutButton = document.querySelector('.checkout-btn');
        checkoutButton?.addEventListener('click', () => this.handleCheckout());
    }

    extractProductFromParams(urlParams) {
        return {
            id: parseInt(urlParams.get('id')),
            name: urlParams.get('name'),
            price: parseFloat(urlParams.get('price')),
            discount: parseFloat(urlParams.get('discount')),
            type: urlParams.get('type'),
            image: urlParams.get('image')
        };
    }

    getCartItems() {
        try {
            return JSON.parse(localStorage.getItem('cart') || '[]');
        } catch (error) {
            console.error('Error parsing cart items:', error);
            return [];
        }
    }

    saveCartItems(items) {
        try {
            localStorage.setItem('cart', JSON.stringify(items));
        } catch (error) {
            console.error('Error saving cart items:', error);
        }
    }

    calculateFinalPrice(price, discount) {
        return discount ? price * (1 - discount / 100) : price;
    }

    addToCart(product) {
        const cartItems = this.getCartItems();
        const existingItem = cartItems.find(item => item.id === product.id);

        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cartItems.push({
                ...product,
                quantity: 1
            });
        }

        this.saveCartItems(cartItems);
        this.updateCartCount();
        this.displayAddToCartMessage();
        this.updateModal();
    }

    updateCartCount() {
        const cartItems = this.getCartItems();
        const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
        const cartCountElement = document.querySelector('.cart-count');
        if (cartCountElement) {
            cartCountElement.textContent = totalItems;
        }
    }

    

    updateQuantity(itemId, change) {
        const cartItems = this.getCartItems();
        const item = cartItems.find(item => item.id === itemId);
        
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                this.removeItem(itemId);
                return;
            }
            this.saveCartItems(cartItems);
            this.updateCartCount();
            this.updateModal();
        }
    }

    removeItem(itemId) {
        const cartItems = this.getCartItems();
        const updatedItems = cartItems.filter(item => item.id !== itemId);
        this.saveCartItems(updatedItems);
        this.updateCartCount();
        this.updateModal();
    }

    updateModal() {
        const cartItems = this.getCartItems();
        const productDetails = document.querySelector('.modal .product-details');
        if (!productDetails) return;

        if (cartItems.length === 0) {
            productDetails.innerHTML = `
                <div class="empty-cart">
                    <h2>Votre panier est vide</h2>
                </div>
            `;
            return;
        }

        let cartHtml = '';
        let totalPrice = 0;

        cartItems.forEach((item, index) => {
            const finalPrice = this.calculateFinalPrice(item.price, item.discount);
            totalPrice += finalPrice * item.quantity;

            cartHtml += this.generateCartItemHtml(item, index, finalPrice);
        });

        cartHtml += this.generateCartTotalHtml(totalPrice);
        productDetails.innerHTML = cartHtml;
    }

    generateCartItemHtml(item, index, finalPrice) {
        return `
            <div class="product-details" ${index > 0 ? 'style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px;"' : ''}>
                <div class="product-image">
                    <img src="${item.image}" alt="${item.name}" class="main-image">
                </div>
                <div class="product-info">
                    <h2>${item.name}</h2>
                    <div class="price-container">
                        <span class="price">${finalPrice.toFixed(2)}â‚¬</span>
                        ${item.discount ? `<span class="discount">-${item.discount}%</span>` : ''}
                    </div>
                    <p class="type">Type: ${item.type}</p>
                    <div class="quantity-controls">
                        <button onclick="cartManager.updateQuantity(${item.id}, -1)" class="quantity-btn minus">-</button>
                        <span class="quantity">${item.quantity}</span>
                        <button onclick="cartManager.updateQuantity(${item.id}, 1)" class="quantity-btn plus">+</button>
                        <button onclick="cartManager.removeItem(${item.id})" class="remove-btn">Remove</button>
                    </div>
                </div>
            </div>
        `;
    }

    generateCartTotalHtml(totalPrice) {
        return `
            <div class="cart-total">
                <h3>Total: ${totalPrice.toFixed(2)}â‚¬</h3>
                <button class="checkout-btn">Proceed to Checkout</button>
            </div>
        `;
    }


   
}

// Initialize cart manager when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.cartManager = new CartManager();
});

// Add styles for cart messages
const style = document.createElement('style');
style.textContent = `
    .add-to-cart-message {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #4CAF50;
        color: white;
        padding: 15px 25px;
        border-radius: 4px;
        animation: slideIn 0.3s ease-out;
        z-index: 1000;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .cart-count {
        background-color: #ff4444;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
        position: absolute;
        top: -8px;
        right: -8px;
    }
`;
document.head.appendChild(style);
// Initialize cart functionality
document.addEventListener('DOMContentLoaded', () => {

   

    // Initialize cart count from localStorage
    cartManager.updateCartCount();

   

    // Cart modal functionality
    const modal = document.getElementById('modal');
    const cartButton = document.getElementById('cartButton');
    const closeButton = document.querySelector('.close');

    cartButton.addEventListener('click', () => {
        cartManager.updateModal();
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    });

    closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = 'unset';
    });

    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'unset';
        }
    });
    
});




//// Add this CSS for the success message
//const style = document.createElement('style');
//style.textContent = `
//    .add-to-cart-message {
//        position: fixed;
//        bottom: 20px;
//        right: 20px;
//        background-color: #4CAF50;
//        color: white;
//        padding: 15px 25px;
//        border-radius: 4px;
//        animation: slideIn 0.3s ease-out;
//        z-index: 1000;
//    }
//
//    @keyframes slideIn {
//        from {
//            transform: translateX(100%);
//            opacity: 0;
//        }
//        to {
//            transform: translateX(0);
//            opacity: 1;
//        }
//    }
//`;
//document.head.appendChild(style);

    </script>
</body>
</html>