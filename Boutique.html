<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="Boutique.css">
</head>

<body>

    
    <header class="main-header">
        <div class="logo">
            <div class="logo-main">CX</div>
            <div class="logo-sub">CapacityX</div>
        </div>

        <button class="mobile-menu-button">‚ò∞</button>

        <nav class="nav-menu">
            <div class="nav-links">
                <a href="Home.html">Accueil</a>
                <a href="Apropos.html">√Ä propos</a>
                <a href="Boutique.html">Boutique</a>
                <a href="Blog.html">Blog</a>
           
                <a href="Contact.html">Contact</a>
            </div>

            <div class="right-section">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Recherche...">
                    <span class="search-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px" class="icon-svg">
                            <path
                                d="M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z" />
                        </svg>
                    </span>
                </div>

                <div class="login-cart">
                    <span>Connexion</span>
                    <div class="cart-icon" id="cartButton">
                        üõí
                        <span class="cart-count">0</span>
                    </div>
                </div>
            </div>
        </nav>

        <div class="overlay"></div>
    </header>
    
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="product-details">
                <div class="product-image">
                    <img src="https://images.unsplash.com/photo-1593095948071-474c5cc2989d?q=80&w=500&auto=format&fit=crop" 
                         alt="Protein Powder"
                         class="main-image">
                </div>
                <div class="product-info">
                    <h2>Prot√©ine en poudre - Vanille</h2>
                    <div class="price-container">
                        <span class="price">$29.99</span>
                        <span class="discount">-20%</span>
                    </div>
                    <p class="type">Type: powder</p>
                    <button class="add-to-cart">AJOUTER AU PANIER</button>
                </div>
            </div>
        </div>
    </div>



    <!-- Add this after the header -->
    <div class="social-sidebar">
        <a href="#" class="social-link facebook"><img src="icons8-facebook.svg" alt="Facebook Icon"></a>
        <a href="#" class="social-link twitter"><img src="icons8-x.svg" alt="twitter Icon"></a>
        <a href="#" class="social-link instagram"><img src="icons8-instagram.svg" alt="instagram Icon"></a>
        <a href="#" class="social-link youtube"><img src="icons8-youtube.svg" alt="youtube Icon"></a>
    </div>


<!--  
    dima l code dial page li khdamin fiha ikon f wst had div 
-->

<div class="main-content">
    <div class="page-layout">
        <!-- Filter Section -->
        <aside class="sidebar">
            <div class="filter-section">
                <h3 class="filter-title">Filtrer par</h3>
                <!-- Filter by Product Type -->
                <div class="filter-group">
                    <h4>Type de produit</h4>
                    <ul>
                        <li><input type="radio" name="product-type" id="all" checked> <label for="all">Tout</label></li>
                        <li><input type="radio" name="product-type" id="pre-workout"> <label for="pre-workout">Pr√©-entra√Ænement</label></li>
                        <li><input type="radio" name="product-type" id="capsules"> <label for="capsules">Capsules</label></li>
                        <li><input type="radio" name="product-type" id="powder"> <label for="powder">Prot√©ine en poudre</label></li>
                    </ul>
                </div>
                <!-- Filter by Price -->
                <div class="filter-group">
                    <h4>Prix</h4>
                    <input type="range" id="price-range" min="15" max="1000" value="1000">
                    <div class="price-values">
                        <span>5,00 ‚Ç¨</span>
                        <span>1000,00 ‚Ç¨</span>
                    </div>
                </div>
                
                <div class="filter-group">
                    <h4>Rabais</h4>
                    <input type="range" id="discount-range" min="0" max="100" value="100">
                    <div class="discount-values">
                        <span>0%</span>
                        <span>100%</span>
                    </div>
                </div>
                
            </div>
            
        </aside>
    <!-- Boutique Section -->
    <section class="featured-products">
        <h2 class="section-title">BOUTIQUE CAPACITYX</h2>
       
<div class="products-grid"> </div><div class="loader" style="display: none;"></div>

        <div class="products-grid">
            
        </div>
    </section>
</div></div>
<!--  
    dima l code dial page li khdamin fiha ikon f wst had div 
-->





    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">CX</div>
                <div class="footer-sublogo">CapacityX</div>
            </div>

            <div class="footer-section">
                <h3>Menu</h3>
                <ul class="footer-links">
                    <li><a href="#">Accueil</a></li>
                    <li><a href="#">√Ä propos</a></li>
                    <li><a href="#">Boutique</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Demander √† l'expert</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Politiques</h3>
                <ul class="footer-links">
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Politique de boutique</a></li>
                    <li><a href="#">Exp√©dition et retours</a></li>
                    <li><a href="#">Politique de cookies</a></li>
                    <li><a href="#">Mentions l√©gales</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Contact</h3>
                <div class="contact-info">
                    <p>01 23 45 67 89</p>
                    <p>47 rue des Couronnes</p>
                    <p>75020 Paris, France</p>
                </div>
                <div class="social-links">
                    <a href="#" class="social-link facebook"><img src="icons8-facebook.svg" alt="Facebook Icon"></a>
                    <a href="#" class="social-link twitter"><img src="icons8-x.svg" alt="twitter Icon"></a>
                    <a href="#" class="social-link instagram"><img src="icons8-instagram.svg" alt="instagram Icon"></a>
                    <a href="#" class="social-link youtube"><img src="icons8-youtube.svg" alt="youtube Icon"></a>
                </div>
            </div>
        </div>

      
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('modal');
    const cartButton = document.getElementById('cartButton');
    const closeButton = document.querySelector('.close');
    let cartCount = 0;
    const cartCountElement = document.querySelector('.cart-count');

    cartButton.addEventListener('click', () => {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    });

    closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = 'unset';
    });

    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'unset';
        }
    });

    const addToCartButton = document.querySelector('.add-to-cart');
    addToCartButton.addEventListener('click', () => {
        cartCount++;
        cartCountElement.textContent = cartCount;
        alert('Product added to cart!');
    });

});
      
// Product data structure
const products = [
    {
        id: 1,
        name: "Prot√©ine en poudre - Vanille",
        price: 29.99,
        type: "powder",
        discount: 20,
        image: "images/p1.png",
        hoverImage: "images/p1h.png"
    },
    {
        id: 2,
        name: "BCAA 200 capsules",
        price: 35.00,
        type: "capsules",
        discount: 15,
        image: "images/p2.png",
        hoverImage: "images/p2h.png"
    },
    {
        id: 3,
        name: "Pr√©-entra√Ænement - Multi fruits",
        price: 45.00,
        discount: 0,
        type: "pre-workout",
        image: "images/p3.png",
        hoverImage: "images/p3h.png"
    },
    {
        id: 4,
        name: "Protein Shake Mix",
        price: 39.99,
        type: "powder",
        discount: 30,
        image: "images/p1.png",
        hoverImage: "images/p1h.png"
    },
    {
        id: 5,
        name: "BCAA en capsules",
        price: 15.00,
        type: "capsules",
        discount: 12,
        image: "images/p4.png",
        hoverImage: "images/p4h.png"
    },
    {
        id: 6,
        name: "BCAA 200 capsules",
        price: 35.00,
        type: "capsules",
        discount: 30,
        image: "images/p5.png",
        hoverImage: "images/p5h.png"
    },
    {
        id: 7,
        name: "Prot√©ine en poudre - Cookies et cr√®me",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p6.png",
        hoverImage: "images/p6h.png"
    },
    {
        id: 8,
        name: "Prot√©ine en poudre - Chocolat",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p7.png"
    },
    {
        id: 9,
        name: "Prot√©ine en poudre - Beurre de cacahou√®te",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p8.png"
    },
    {
        id: 10,
        name: "Prot√©ine en poudre - Cappuccino",
        price: 50.99,
        type: "powder",
        discount: 30,
        image: "images/p9.png"
    },
    {
        id: 11,
        name: "Pr√©-entra√Ænement - Framboise",
        price: 23.99,
        type: "pre-workout",
        discount: 30,
        image: "images/p10.png",
        hoverImage: "images/p10h.png"
    },
    {
        id: 12,
        name: "Pr√©-entra√Ænement - Past√®que",
        price: 25.99,
        type: "pre-workout",
        discount: 30,
        image: "images/p11.png"
    },
    {
        id: 13,
        name: "Pr√©-entra√Ænement - Cerise",
        price: 44.99,
        type: "pre-workout",
        discount: 22,
        image: "images/p12.png"
    },
    {
        id: 14,
        name: "Pr√©-entra√Ænement - Pomme verte",
        price: 25.99,
        type: "pre-workout",
        discount: 34,
        image: "images/p13.png"
    },
    {
        id: 15,
        name: "Pr√©-entra√Ænement - Limonade",
        price: 23.99,
        type: "pre-workout",
        discount: 22,
        image: "images/p14.png"
    }
];
// Cart management functions
const cartManager = {
    getCartItems() {
        return JSON.parse(localStorage.getItem('cart') || '[]');
    },

    saveCartItems(items) {
        localStorage.setItem('cart', JSON.stringify(items));
    },

    addToCart(product) {
        const cartItems = this.getCartItems();
        const existingItem = cartItems.find(item => item.id === product.id);

        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cartItems.push({
                id: product.id,
                name: product.name,
                price: product.price,
                discount: product.discount,
                type: product.type,
                image: product.image,
                quantity: 1
            });
        }

        this.saveCartItems(cartItems);
        this.updateCartCount();
        this.displayAddToCartMessage(); // Show success message after adding to cart
    },
 // Display the success message after adding to cart
 displayAddToCartMessage() {
        const message = document.createElement('div');
        message.classList.add('add-to-cart-message');
        message.textContent = 'Produit ajout√© au panier';
        document.body.appendChild(message);

        // Remove message after 2 seconds
        setTimeout(() => {
            message.remove();
        }, 2000);
    },
    updateCartCount() {
        const cartItems = this.getCartItems();
        const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
        document.querySelector('.cart-count').textContent = totalItems;
    },

    calculateFinalPrice(price, discount) {
        return discount ? price * (1 - discount / 100) : price;
    },

    updateModal() {
        const cartItems = this.getCartItems();
        const productDetails = document.querySelector('.modal .product-details');
        
        if (cartItems.length === 0) {
            productDetails.innerHTML = `
                <div class="empty-cart">
                    <h2>Votre panier est vide</h2>
                </div>
            `;
            return;
        }

        let cartHtml = '';
        let totalPrice = 0;

        cartItems.forEach((item, index) => {
            const finalPrice = this.calculateFinalPrice(item.price, item.discount);
            totalPrice += finalPrice * item.quantity;

            cartHtml += `
                <div class="product-details" ${index > 0 ? 'style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px;"' : ''}>
                    <div class="product-image">
                        <img src="${item.image}" alt="${item.name}" class="main-image">
                    </div>
                    <div class="product-info">
                        <h2>${item.name}</h2>
                        <div class="price-container">
                            <span class="price">${finalPrice.toFixed(2)}‚Ç¨</span>
                            ${item.discount ? `<span class="discount">-${item.discount}%</span>` : ''}
                        </div>
                        <p class="type">Type: ${item.type}</p>
                        <div class="quantity-controls">
                            <button onclick="cartManager.updateQuantity(${item.id}, -1)" class="quantity-btn minus">-</button>
                            <span class="quantity">${item.quantity}</span>
                            <button onclick="cartManager.updateQuantity(${item.id}, 1)" class="quantity-btn plus">+</button>
                            <button onclick="cartManager.removeItem(${item.id})" class="remove-btn">Supprimer</button>
                        </div>
                    </div>
                </div>
            `;
        });

        // Add total section
        cartHtml += `
            <div class="cart-total">
                <h3>Total: ${totalPrice.toFixed(2)}‚Ç¨</h3>
                <button class="checkout-btn">Proc√©der au paiement</button>
            </div>
        `;

        productDetails.innerHTML = cartHtml;
    },

    updateQuantity(itemId, change) {
        const cartItems = this.getCartItems();
        const item = cartItems.find(item => item.id === itemId);
        
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                this.removeItem(itemId);
                return;
            }
        }

        this.saveCartItems(cartItems);
        this.updateCartCount();
        this.updateModal();
    },

    removeItem(itemId) {
    const cartItems = this.getCartItems();
    const updatedItems = cartItems.filter(item => item.id !== itemId);
    this.saveCartItems(updatedItems);
    this.updateCartCount();
    this.updateModal();
}

};

// Initialize cart functionality
document.addEventListener('DOMContentLoaded', () => {
    // Initialize cart count from localStorage
    cartManager.updateCartCount();

    // Add click event listeners to all "AJOUTER AU PANIER" buttons
    document.querySelectorAll('.product-footer').forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            const productCard = button.closest('.product-card');
            const productLink = productCard.querySelector('.product-links');
            const urlParams = new URLSearchParams(new URL(productLink.href).search);
            
            const product = {
                id: parseInt(urlParams.get('id')),
                name: urlParams.get('name'),
                price: parseFloat(urlParams.get('price')),
                discount: parseFloat(urlParams.get('discount')),
                type: urlParams.get('type'),
                image: urlParams.get('image')
            };

            cartManager.addToCart(product);
        });
    });

    // Cart modal functionality
    const modal = document.getElementById('modal');
    const cartButton = document.getElementById('cartButton');
    const closeButton = document.querySelector('.close');

    cartButton.addEventListener('click', () => {
        cartManager.updateModal();
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    });

    closeButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = 'unset';
    });

    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'unset';
        }
    });
    
});
const mobileMenuButton = document.querySelector('.mobile-menu-button');
        const navMenu = document.querySelector('.nav-menu');
        const overlay = document.querySelector('.overlay');

        mobileMenuButton.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        overlay.addEventListener('click', () => {
            navMenu.classList.remove('active');
            overlay.classList.remove('active');
        });
// Filter state (set to general values to show all products initially)
const filterState = {
    productType: 'all',  // 'all' allows all product types
    maxPrice: 90,        // Set to the max possible price
    maxDiscount: 100,    // Show products with any discount (0% to 100%)
    selectedDiscounts: new Set()  // No specific discount filter selected initially
};

// Initialize filters
function initializeFilters() {
    // Product type radio buttons
    document.querySelectorAll('input[name="product-type"]').forEach(radio => {
        radio.addEventListener('change', (e) => {
            filterState.productType = e.target.id;
            applyFilters();
        });
    });

    // Price range slider
    const priceRange = document.getElementById('price-range');
    if (priceRange) {
        const priceValues = document.querySelector('.price-values');
        const maxPriceSpan = priceValues.querySelector('span:last-child');
        
        // Initialize the max price based on the filter state
        priceRange.value = filterState.maxPrice;
        maxPriceSpan.textContent = `${filterState.maxPrice.toFixed(2)} ‚Ç¨`; // Set initial value
        
        priceRange.addEventListener('input', (e) => {
            filterState.maxPrice = parseFloat(e.target.value);
            maxPriceSpan.textContent = `${filterState.maxPrice.toFixed(2)} ‚Ç¨`; // Update dynamically
            applyFilters();
        });
    }

    // Discount range slider
    const discountRange = document.getElementById('discount-range');
    if (discountRange) {
        const discountValues = document.querySelector('.discount-values');
        const maxDiscountSpan = discountValues.querySelector('span:last-child');
        
        // Initialize the max discount based on the filter state
        discountRange.value = filterState.maxDiscount;
        maxDiscountSpan.textContent = `${filterState.maxDiscount}%`; // Set initial value
        
        discountRange.addEventListener('input', (e) => {
            filterState.maxDiscount = parseFloat(e.target.value);
            maxDiscountSpan.textContent = `${filterState.maxDiscount}%`; // Update dynamically
            applyFilters();
        });
    }

    // Discount checkboxes (if necessary)
    document.querySelectorAll('.filter-group input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', (e) => {
            const discountValue = e.target.id === "no-discount" ? 0 : parseInt(e.target.id);
            if (e.target.checked) {
                filterState.selectedDiscounts.add(discountValue);
            } else {
                filterState.selectedDiscounts.delete(discountValue);
            }
            applyFilters();
        });
    });
    
}

// Filter products
function filterProducts() {
    return products.filter(product => {
        // Default discount to 0 if it's not provided
        const productDiscount = product.discount || 0;
        
        const typeMatch = filterState.productType === 'all' || product.type === filterState.productType;
        const priceMatch = product.price <= filterState.maxPrice;
        
        // Check if product's discount is within the selected range
        const discountMatch = productDiscount <= filterState.maxDiscount;

        return typeMatch && priceMatch && discountMatch;
    });
}

// Calculate discounted price
function calculateDiscountedPrice(price, discount) {
    if (!discount) return price;
    return price * (1 - discount / 100);
}
// Modify the renderProducts function where the product cards are created
function renderProducts(filteredProducts) {
    const productsGrid = document.querySelector('.products-grid');
    const loader = document.querySelector('.loader');
    
    loader.style.display = 'block';
    productsGrid.style.opacity = '0';
    
    setTimeout(() => {
        productsGrid.innerHTML = '';
        
        if (filteredProducts.length === 0) {
            productsGrid.innerHTML = `
                <div class="no-products-message">
                    Aucun produit ne correspond √† vos crit√®res de recherche.
                </div>
            `;
        } else {
            filteredProducts.forEach(product => {
                const hasDiscount = product.discount > 0;
                const discountedPrice = calculateDiscountedPrice(product.price, product.discount);
                
                // Create URL-friendly product name (slug)
                const productSlug = product.name
                    .toLowerCase()
                    .replace(/[√©√®√™]/g, 'e')
                    .replace(/[√†√¢]/g, 'a')
                    .replace(/[√π√ª]/g, 'u')
                    .replace(/[√¥√∂]/g, 'o')
                    .replace(/[√Æ√Ø]/g, 'i')
                    .replace(/[^a-z0-9]/g, '-')
                    .replace(/-+/g, '-')
                    .replace(/^-|-$/g, '');
                
                const productCard = `
                    <div class="product-card">
                        <a href="Product.html?id=${product.id}&name=${encodeURIComponent(product.name)}&type=${encodeURIComponent(product.type)}&price=${product.price}&discount=${product.discount}&image=${encodeURIComponent(product.image)}${product.hoverImage ? '&hoverImage=' + encodeURIComponent(product.hoverImage) : ''}" 
                           class="product-links" 
                           style="text-decoration: none; color: inherit;">
                            ${hasDiscount ? `
                                <span class="portions-badge">
                                    -${product.discount}% off
                                </span>
                            ` : ''}
                            <div class="product-image">
                                <img src="${product.image}" alt="${product.name}" data-hover="${product.hoverImage ? product.hoverImage : product.image}">
                            </div>
                            <div class="product-info">
                                <h3>${product.name}</h3>
                                <div class="price-container">
                                    ${hasDiscount ? `
                                        <p class="original-price">${product.price.toFixed(2)} ‚Ç¨</p>
                                        <p class="price">${discountedPrice.toFixed(2)} ‚Ç¨</p>
                                    ` : `
                                        <p class="price">${product.price.toFixed(2)} ‚Ç¨</p>
                                    `}
                                </div>
                            </div>
                        </a>
                        <div class="product-footer" onclick="cartManager.addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})">
            AJOUTER AU PANIER
        </div>
                    </div>
                `;
                productsGrid.insertAdjacentHTML('beforeend', productCard);
            });
        }
        
        initializeHoverEffects();
        loader.style.display = 'none';
        productsGrid.style.opacity = '1';
    }, 300);
}
// Initialize hover effects
function initializeHoverEffects() {
    document.querySelectorAll('.product-image img').forEach(img => {
        const hoverImage = img.getAttribute('data-hover');
        const originalImage = img.src;
        
        img.addEventListener('mouseenter', () => {
            img.src = hoverImage;
        });
        
        img.addEventListener('mouseleave', () => {
            img.src = originalImage;
        });
    });
}

// Apply filters with debounce
let filterTimeout;
function applyFilters() {
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
        const filteredProducts = filterProducts();
        renderProducts(filteredProducts);
    }, 250);
}

// Add this CSS for the success message
const style = document.createElement('style');
style.textContent = `
    .add-to-cart-message {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #4CAF50;
        color: white;
        padding: 15px 25px;
        border-radius: 4px;
        animation: slideIn 0.3s ease-out;
        z-index: 1000;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
`;
document.head.appendChild(style);
// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    initializeFilters();
    applyFilters();
});

    </script>
</body>
</html>